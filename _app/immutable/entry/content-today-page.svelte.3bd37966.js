import{S as D,i as I,s as M,e as d,t as T,c as p,b,d as H,f as h,L as v,R as $,h as m,j as g,M as R,k as q,n as _,I as F,J as L,o as k,q as y,x as w,X as N,a as U,g as V,p as j,r as B,Y as G,C as S,D as A,E as J,H as O}from"../chunks/index.a9313273.js";import{o as P}from"../chunks/stores.2b681d38.js";import{T as X,f as Y}from"../chunks/api.8ee997d9.js";const z=""+new URL("../assets/feh.b18ea270.webp",import.meta.url).href,K=""+new URL("../assets/over.1d2268e0.jpg",import.meta.url).href;function Q(o){let e,n,t,s=o[0].name+"",i,c,r;return{c(){e=d("button"),n=d("div"),t=d("h2"),i=T(s),this.h()},l(u){e=p(u,"BUTTON",{class:!0,style:!0});var l=b(e);n=p(l,"DIV",{class:!0});var f=b(n);t=p(f,"H2",{class:!0});var a=b(t);i=H(a,s),a.forEach(h),f.forEach(h),l.forEach(h),this.h()},h(){v(t,"class","dark no-bold svelte-1r10386"),v(n,"class","event_label svelte-1r10386"),v(e,"class","event svelte-1r10386"),$(e,"--event_type_colour",o[0].expand.event_type.colour)},m(u,l){m(u,e,l),g(e,n),g(n,t),g(t,i),c||(r=R(e,"click",o[1]),c=!0)},p(u,[l]){l&1&&s!==(s=u[0].name+"")&&q(i,s),l&1&&$(e,"--event_type_colour",u[0].expand.event_type.colour)},i:_,o:_,d(u){u&&h(e),c=!1,r()}}}function W(o,e,n){let{event:t}=e;function s(){P(X,{event:t})}return o.$$set=i=>{"event"in i&&n(0,t=i.event)},[t,s]}class Z extends D{constructor(e){super(),I(this,e,W,Q,M,{event:0})}}function x(o,e,n){const t=o.slice();return t[3]=e[n],t}function ee(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function te(o){let e,n,t,s;const i=[ne,le],c=[];function r(u,l){return u[2].events.length<=0?0:1}return e=r(o),n=c[e]=i[e](o),{c(){n.c(),t=w()},l(u){n.l(u),t=w()},m(u,l){c[e].m(u,l),m(u,t,l),s=!0},p(u,l){n.p(u,l)},i(u){s||(k(n),s=!0)},o(u){y(n),s=!1},d(u){c[e].d(u),u&&h(t)}}}function le(o){let e,n,t,s,i,c=o[2].events,r=[];for(let l=0;l<c.length;l+=1)r[l]=C(x(o,c,l));const u=l=>y(r[l],1,1,()=>{r[l]=null});return{c(){e=d("h1"),n=T("Content at next reset:"),t=U();for(let l=0;l<r.length;l+=1)r[l].c();s=w(),this.h()},l(l){e=p(l,"H1",{class:!0});var f=b(e);n=H(f,"Content at next reset:"),f.forEach(h),t=V(l);for(let a=0;a<r.length;a+=1)r[a].l(l);s=w(),this.h()},h(){v(e,"class","svelte-lufehp")},m(l,f){m(l,e,f),g(e,n),m(l,t,f);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(l,f);m(l,s,f),i=!0},p(l,f){if(f&1){c=l[2].events;let a;for(a=0;a<c.length;a+=1){const E=x(l,c,a);r[a]?(r[a].p(E,f),k(r[a],1)):(r[a]=C(E),r[a].c(),k(r[a],1),r[a].m(s.parentNode,s))}for(j(),a=c.length;a<r.length;a+=1)u(a);B()}},i(l){if(!i){for(let f=0;f<c.length;f+=1)k(r[f]);i=!0}},o(l){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)y(r[f]);i=!1},d(l){l&&h(e),l&&h(t),G(r,l),l&&h(s)}}}function ne(o){let e,n;return{c(){e=d("img"),this.h()},l(t){e=p(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){v(e,"class","over svelte-lufehp"),N(e.src,n=K)||v(e,"src",n),v(e,"alt","It's over.")},m(t,s){m(t,e,s)},p:_,i:_,o:_,d(t){t&&h(e)}}}function C(o){let e,n;return e=new Z({props:{event:o[3]}}),{c(){S(e.$$.fragment)},l(t){A(e.$$.fragment,t)},m(t,s){J(e,t,s),n=!0},p:_,i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(t){O(e,t)}}}function se(o){let e,n;return{c(){e=d("img"),this.h()},l(t){e=p(t,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){v(e,"class","feh svelte-lufehp"),N(e.src,n=z)||v(e,"src",n),v(e,"alt","Feh, the messenger owl")},m(t,s){m(t,e,s)},p:_,i:_,o:_,d(t){t&&h(e)}}}function re(o){let e,n,t,s={ctx:o,current:null,token:null,hasCatch:!1,pending:se,then:te,catch:ee,value:2,blocks:[,,,]};return F(o[0],s),{c(){e=d("div"),n=d("div"),s.block.c(),this.h()},l(i){e=p(i,"DIV",{class:!0});var c=b(e);n=p(c,"DIV",{class:!0});var r=b(n);s.block.l(r),r.forEach(h),c.forEach(h),this.h()},h(){v(n,"class","content svelte-lufehp"),v(e,"class","scroll svelte-lufehp")},m(i,c){m(i,e,c),g(e,n),s.block.m(n,s.anchor=null),s.mount=()=>n,s.anchor=null,t=!0},p(i,[c]){o=i,L(s,o,c)},i(i){t||(k(s.block),t=!0)},o(i){for(let c=0;c<3;c+=1){const r=s.blocks[c];y(r)}t=!1},d(i){i&&h(e),s.block.d(),s.token=null,s=null}}}function oe(o){let e=new Date;const n=new Date(e.getTime()+24*60*60*1e3);return o.filter(t=>{const s=new Date(t.date_start);return s>=e&&s<=n})}function ae(o){async function e(){const t=await Y();return{events:oe(t)}}return[e()]}class fe extends D{constructor(e){super(),I(this,e,ae,re,M,{})}}export{fe as default};
